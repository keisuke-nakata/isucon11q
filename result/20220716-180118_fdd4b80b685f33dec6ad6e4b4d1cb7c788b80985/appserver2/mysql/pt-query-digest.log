
# 29.4s user time, 50ms system time, 35.12M rss, 42.27M vsz
# Current date: Sat Jul 16 18:03:41 2022
# Hostname: ip-192-168-0-12
# Files: /var/log/mysql/mysql-slow.log
# Overall: 401.47k total, 97 unique, 4.41k QPS, 9.09x concurrency ________
# Time range: 2022-07-16 18:01:25 to 18:02:56
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           827s       0      7s     2ms   176us    75ms    31us
# Lock time             2s       0    13ms     4us    15us    73us       0
# Rows sent          2.54M       0   1.50k    6.63    0.99   71.18       0
# Rows examine      36.05M       0 317.03k   94.14       0   3.26k       0
# Rows affecte      80.21k       0     618    0.20    0.99    1.38       0
# Bytes sent       745.64M       0 278.75k   1.90k  719.66  14.07k   12.54
# Query size        34.97M       6 790.36k   91.32  258.32   1.36k   31.70
# Boolean:
# QC hit         8% yes,  91% no

# Profile
# Rank Query ID                     Response time  Calls  R/Call V/M   Ite
# ==== ============================ ============== ====== ====== ===== ===
#    1 0x72CD0CE7ACF96ED7D0F5B33... 693.6949 83.9%    648 1.0705  2.20 SELECT isu_condition isu r
#    2 0x9C6C682008AE0D08F3E2A00...  52.6574  6.4%   3363 0.0157  0.02 SELECT isu_condition
#    3 0xFFFCA4D67EA0A788813031B...  35.8180  4.3%  10139 0.0035  0.00 COMMIT
#    4 0xB8B32624C3268C0925657C3...  17.8981  2.2%  80720 0.0002  0.01 INSERT isu_condition
# MISC 0xMISC                        27.0700  3.3% 306603 0.0001   0.0 <93 ITEMS>

# Query 1: 10.45 QPS, 11.19x concurrency, ID 0x72CD0CE7ACF96ED7D0F5B33E12D87D49 at byte 148756071
# This item is included in the report because it matches --limit.
# Scores: V/M = 2.20
# Time range: 2022-07-16 18:01:54 to 18:02:56
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     648
# Exec time     83    694s    10us      7s      1s      5s      2s   293ms
# Lock time      5    97ms       0    13ms   149us   125us   815us    69us
# Rows sent      1  48.82k      28      84   77.14   80.10    8.49   76.28
# Rows examine  84  30.52M       0 317.03k  48.23k 211.82k  65.94k  18.47k
# Rows affecte   0       0       0       0       0       0       0       0
# Bytes sent     0   6.26M   3.76k  10.75k   9.89k  10.29k   1.06k   9.80k
# Query size     0 287.30k     454     454     454     454       0     454
# Boolean:
# QC hit         0% yes,  99% no
# String:
# Databases    isucondition
# Hosts        ip-192-168... (328/50%)... 1 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us
#   1ms  ##
#  10ms  #############
# 100ms  ################################################################
#    1s  #################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu_condition'\G
#    SHOW CREATE TABLE `isucondition`.`isu_condition`\G
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu'\G
#    SHOW CREATE TABLE `isucondition`.`isu`\G
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'r'\G
#    SHOW CREATE TABLE `isucondition`.`r`\G
WITH r AS (  SELECT   isu_condition.jia_isu_uuid,   isu_condition.timestamp,   isu_condition.rev_timestamp,   isu_condition.condition,   isu.`id`,   isu.`character`,   ROW_NUMBER() OVER (PARTITION BY jia_isu_uuid ORDER BY rev_timestamp) AS rn   FROM isu_condition JOIN isu ON isu_condition.jia_isu_uuid = isu.jia_isu_uuid) SELECT   jia_isu_uuid,   `timestamp`,   `condition`,   `id`,   `character`  FROM r WHERE rn = 1 ORDER BY `character`, rev_timestamp\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
SELECT   isu_condition.jia_isu_uuid,   isu_condition.timestamp,   isu_condition.rev_timestamp,   isu_condition.condition,   isu.`id`,   isu.`character`,   ROW_NUMBER() OVER (PARTITION BY jia_isu_uuid ORDER BY rev_timestamp) AS rn   FROM isu_condition JOIN isu ON isu_condition.jia_isu_uuid = isu.jia_isu_uuid) SELECT   jia_isu_uuid,   `timestamp`,   `condition`,   `id`,   `character`  FROM r WHERE rn = 1 ORDER BY `character`, rev_timestamp\G

# Query 2: 56.05 QPS, 0.88x concurrency, ID 0x9C6C682008AE0D08F3E2A0049B030C70 at byte 145083776
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2022-07-16 18:01:54 to 18:02:54
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3363
# Exec time      6     53s    93us   120ms    16ms    51ms    17ms     8ms
# Lock time      5    97ms     8us    12ms    28us    21us   331us    12us
# Rows sent     71   1.81M       0   1.50k  565.87   1.14k  359.34  511.45
# Rows examine  11   4.09M       0   3.00k   1.25k   2.50k  745.30   1.14k
# Rows affecte   0       0       0       0       0       0       0       0
# Bytes sent    37 283.08M     679 231.48k  86.19k 182.98k  54.58k  76.03k
# Query size     1 515.62k     157     157     157     157       0     157
# String:
# Databases    isucondition
# Hosts        ip-192-168... (1691/50%)... 1 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  #######
#   1ms  ################################################################
#  10ms  ############################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu_condition'\G
#    SHOW CREATE TABLE `isucondition`.`isu_condition`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM `isu_condition` WHERE `jia_isu_uuid` = '8f7e4fb8-968b-4900-b226-3d8ab1c63822'	AND `timestamp` < '2021-08-29 15:45:37'	ORDER BY `timestamp` DESC\G

# Query 3: 168.98 QPS, 0.60x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 13741822
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-07-16 18:01:54 to 18:02:54
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10139
# Exec time      4     36s     5us    55ms     4ms    10ms     4ms     3ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Rows affecte   0       0       0       0       0       0       0       0
# Bytes sent     0 108.92k      11      11      11      11       0      11
# Query size     0  59.41k       6       6       6       6       0       6
# String:
# Databases    isucondition
# Hosts        ip-192-168... (5083/50%)... 1 more
# Users        isucon
# Query_time distribution
#   1us  #
#  10us  ########
# 100us  #######
#   1ms  ################################################################
#  10ms  ####
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 4: 1.35k QPS, 0.30x concurrency, ID 0xB8B32624C3268C0925657C305C0ED778 at byte 113063656
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2022-07-16 18:01:54 to 18:02:54
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         20   80720
# Exec time      2     18s    26us    80ms   221us   159us     1ms    54us
# Lock time     77      1s     6us    12ms    17us    21us   114us    12us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Rows affecte  98  78.83k       1       1       1       1       0       1
# Bytes sent     0   1.02M      13      14   13.20   13.83    0.50   12.54
# Query size    55  19.55M     225     302  254.00  271.23   11.16  246.02
# String:
# Databases    isucondition
# Hosts        ip-192-168... (40394/50%)... 1 more
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucondition` LIKE 'isu_condition'\G
#    SHOW CREATE TABLE `isucondition`.`isu_condition`\G
INSERT INTO `isu_condition`	(`jia_isu_uuid`, `timestamp`, `is_sitting`, `condition`, `message`)	VALUES ('5780a369-67ba-41e0-8609-9ce26143b484', '2021-08-24 21:39:44', 1, 'is_dirty=true,is_overweight=true,is_broken=true', 'う〜ん無理そう〜')\G
